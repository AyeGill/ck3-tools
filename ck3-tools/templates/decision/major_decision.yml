name: major_decision
description: Major decision with significant realm impact
category: decision
version: 1.0

parameters:
  name:
    type: string
    required: true
    description: Decision name

  gold_cost:
    type: integer
    default: 500
    description: Gold cost

  prestige_cost:
    type: integer
    default: 200
    description: Prestige cost

  piety_cost:
    type: integer
    default: 0
    description: Piety cost

  cooldown_years:
    type: integer
    default: 10
    description: Cooldown in years

  effect_type:
    type: enum
    values: [prestige, piety, custom]
    default: prestige
    description: Primary effect type

  effect_value:
    type: integer
    default: 500
    description: Effect magnitude

structure:
  major: yes
  sort_order: 100

  is_shown:
    conditions: |
      is_adult = yes
      is_ruler = yes

  is_valid_showing_failures_only: |
    is_imprisoned = no
    is_at_war = no

  is_valid:
    gold_check:
      text: "Needs {{gold_cost}} gold"
      condition: "gold >= {{gold_cost}}"
    prestige_check:
      text: "Needs {{prestige_cost}} prestige"
      condition: "prestige >= {{prestige_cost}}"

  cost:
    gold: "{{gold_cost}}"
    prestige: "{{prestige_cost}}"
    piety: "{{piety_cost}}"

  cooldown:
    years: "{{cooldown_years}}"

  effect: |
    {{#if (eq effect_type 'prestige')}}add_prestige = {{effect_value}}{{/if}}
    {{#if (eq effect_type 'piety')}}add_piety = {{effect_value}}{{/if}}
    trigger_event = {{name}}_events.0001

  ai_check_interval: 60

  ai_potential: |
    gold >= {{multiply gold_cost 3}}
    is_at_war = no

  ai_will_do:
    base: 50
    modifiers:
      - add: 50
        condition: "has_trait = ambitious"
      - factor: 0
        condition: "has_trait = content"

localization:
  name_template: "{{capitalize (format_name name)}}"
  desc_template: "A major decision that will significantly impact your realm."
  confirm_template: "Proceed"
  tooltip_template: "This action will cost {{gold_cost}} gold and {{prestige_cost}} prestige."
