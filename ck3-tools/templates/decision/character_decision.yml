name: character_decision
description: Personal character decision with moderate impact
category: decision
version: 1.0

parameters:
  name:
    type: string
    required: true
    description: Decision name

  gold_cost:
    type: integer
    default: 100
    description: Gold cost

  prestige_cost:
    type: integer
    default: 0
    description: Prestige cost (0 for none)

  cooldown_years:
    type: integer
    default: 5
    description: Cooldown in years

  stat_requirement:
    type: enum
    values: [none, diplomacy, martial, stewardship, intrigue, learning]
    default: none
    description: Required stat check

  stat_value:
    type: integer
    default: 10
    description: Minimum stat value if stat_requirement set

structure:
  major: no
  sort_order: 50

  is_shown: |
    is_adult = yes

  is_valid_showing_failures_only: |
    is_imprisoned = no

  is_valid:
    gold_requirement:
      text: "Needs {{gold_cost}} gold"
      condition: "gold >= {{gold_cost}}"

  cost:
    gold: "{{gold_cost}}"
    prestige: "{{prestige_cost}}"

  cooldown:
    years: "{{cooldown_years}}"

  effect: |
    add_prestige = {{divide gold_cost 2}}
    custom_tooltip = {{name}}_effect_tooltip

  ai_check_interval: 24

  ai_potential: |
    gold >= {{multiply gold_cost 2}}

  ai_will_do:
    base: 30
    modifiers:
      - factor: 0.5
        condition: "gold < {{multiply gold_cost 3}}"

localization:
  name_template: "{{capitalize (format_name name)}}"
  desc_template: "A personal decision that affects your character."
  confirm_template: "Take Action"
  tooltip_template: "Effect of {{format_name name}}."
