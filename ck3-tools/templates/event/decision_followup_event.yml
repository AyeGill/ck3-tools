name: decision_followup_event
description: Event triggered after a decision is taken
category: event
version: 1.0

parameters:
  namespace:
    type: string
    required: true
    description: Event namespace

  event_id:
    type: integer
    required: true
    description: Event ID

  decision_name:
    type: string
    required: true
    description: Decision that triggered this

  outcome_type:
    type: enum
    values: [success, neutral, failure, mixed]
    default: success
    description: Outcome type

  success_prestige:
    type: integer
    default: 100
    description: Prestige gain on success

  success_opinion:
    type: integer
    default: 15
    description: Opinion gain with vassals on success

structure:
  event_type: character_event
  namespace: "{{namespace}}"
  id: "{{namespace}}.{{event_id}}"

  title: "{{decision_name}}_outcome_{{outcome_type}}_title"
  desc: "{{decision_name}}_outcome_{{outcome_type}}_desc"

  theme: realm

  left_portrait: root

  immediate:
    "{{#if (eq outcome_type 'success')}}# Success outcome
    add_prestige = {{success_prestige}}{{/if}}"

  option:
    - name: "{{decision_name}}_outcome_{{outcome_type}}.a"
      trigger:
        "{{#if (eq outcome_type 'success')}}# This is a good outcome{{/if}}"
      "{{#if (eq outcome_type 'success')}}every_vassal:
        limit:
          is_adult = yes
        add_opinion:
          target = root
          modifier = successful_{{decision_name}}
          opinion = {{success_opinion}}{{/if}}"

    "{{#if (eq outcome_type 'mixed')}}- name: '{{decision_name}}_outcome_{{outcome_type}}.b'
      # Alternative response for mixed outcome
      add_prestige = {{divide success_prestige 2}}{{/if}}"

localization:
  success_title: "Success!"
  success_desc: "Your decision has led to a favorable outcome."
  neutral_title: "Outcome"
  neutral_desc: "Your decision has been carried out."
  failure_title: "Unfortunate"
  failure_desc: "Things did not go as planned."
  option_a: "Excellent"
  option_b: "I see"
