name: economy_building
description: Standard economy building with income focus
category: building
version: 1.0

parameters:
  name:
    type: string
    required: true
    description: Building base name

  levels:
    type: integer
    default: 3
    min: 1
    max: 8
    description: Number of building levels

  base_cost:
    type: integer
    default: 200
    description: Base construction cost in gold

  cost_scaling:
    type: float
    default: 2.0
    description: Multiplier for each level

  construction_time:
    type: integer
    default: 730
    description: Construction time in days

  primary_effect:
    type: enum
    values: [learning, stewardship, diplomacy, martial, intrigue]
    default: learning
    description: Primary stat bonus

  income_multiplier:
    type: float
    default: 0.1
    description: Income per level

  levy_multiplier:
    type: integer
    default: 50
    description: Levy troops per level

structure:
  construction_time: "{{construction_time}}"

  can_construct_potential:
    building_requirement_castle_city_church: yes

  can_construct_showing_failures_only:
    building_requirement_tribal: no

  cost_gold: "{{floor (multiply base_cost (power cost_scaling (subtract level 1)))}}"

  character_modifier:
    monthly_piety: "{{to_fixed (multiply 0.05 level) 2}}"
    "{{primary_effect}}": "{{level}}"

  province_modifier:
    monthly_income: "{{to_fixed (multiply income_multiplier level) 1}}"
    levy_size: "{{multiply levy_multiplier level}}"

  next_building: "{{name}}_0{{add level 1}}"

  type_icon: '"icon_building_{{name}}.dds"'

  flag: "{{name}}"

  ai_value:
    base: "{{subtract 15 level}}"
    modifiers:
      - add: 20
        condition: "scope:holder = { {{primary_effect}} >= {{add 10 (multiply level 2)}} }"
      - factor: 0.1
        condition: "scope:holder = { is_at_war = yes }"
      - factor: 0.25
        condition: "free_building_slots > 0"

localization:
  name_template: "{{tier}} {{formatted_name}}"
  desc_template: "A {{tier_lower}} {{formatted_name}} that provides income and {{primary_effect}} bonuses."
