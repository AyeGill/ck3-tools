{
  "name": "ck3-tools",
  "displayName": "CK3 Modding Tools",
  "description": "Code generation and tooling for Crusader Kings 3 modding",
  "version": "0.1.0",
  "publisher": "ck3-tools",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Snippets",
    "Programming Languages"
  ],
  "activationEvents": [
    "workspaceContains:**/descriptor.mod"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "languages": [
      {
        "id": "ck3",
        "aliases": ["CK3 Script", "ck3"],
        "extensions": [],
        "filenames": [],
        "filenamePatterns": [
          "**/common/**/*.txt",
          "**/events/**/*.txt",
          "**/history/**/*.txt",
          "**/map_data/**/*.txt",
          "**/localization/**/*.yml"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "ck3",
        "scopeName": "source.ck3",
        "path": "./syntaxes/ck3.tmLanguage.json"
      }
    ],
    "commands": [
      {
        "command": "ck3-tools.addTrait",
        "title": "CK3: Add Trait from Template"
      },
      {
        "command": "ck3-tools.addBuilding",
        "title": "CK3: Add Building from Template"
      },
      {
        "command": "ck3-tools.addEvent",
        "title": "CK3: Add Event from Template"
      },
      {
        "command": "ck3-tools.addDecision",
        "title": "CK3: Add Decision from Template"
      },
      {
        "command": "ck3-tools.addSecret",
        "title": "CK3: Add Secret Type from Template"
      },
      {
        "command": "ck3-tools.addInteraction",
        "title": "CK3: Add Character Interaction from Template"
      },
      {
        "command": "ck3-tools.addActivity",
        "title": "CK3: Add Activity Type from Template"
      },
      {
        "command": "ck3-tools.addScheme",
        "title": "CK3: Add Scheme Type from Template"
      },
      {
        "command": "ck3-tools.generateLocalization",
        "title": "CK3: Generate Localization for Current File"
      },
      {
        "command": "ck3-tools.goToLocalization",
        "title": "CK3: Go to Localization"
      },
      {
        "command": "ck3-tools.validateDirectory",
        "title": "CK3: Validate Directory"
      }
    ],
    "configuration": {
      "title": "CK3 Modding Tools",
      "properties": {
        "ck3-tools.gamePath": {
          "type": "string",
          "default": "",
          "description": "Path to the CK3 game installation directory (e.g., '/Users/you/Library/Application Support/Steam/steamapps/common/Crusader Kings III'). Used to index game files for validation and autocomplete."
        }
      }
    },
    "menus": {
      "explorer/context": [
        {
          "command": "ck3-tools.validateDirectory",
          "when": "explorerResourceIsFolder",
          "group": "ck3-tools@1"
        }
      ],
      "editor/context": [
        {
          "command": "ck3-tools.addTrait",
          "when": "resourcePath =~ /\\/common\\/traits\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addBuilding",
          "when": "resourcePath =~ /\\/common\\/buildings\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addEvent",
          "when": "resourcePath =~ /\\/events\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addDecision",
          "when": "resourcePath =~ /\\/common\\/decisions\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addSecret",
          "when": "resourcePath =~ /\\/common\\/secret_types\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addInteraction",
          "when": "resourcePath =~ /\\/common\\/character_interactions\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addActivity",
          "when": "resourcePath =~ /\\/common\\/activities\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.addScheme",
          "when": "resourcePath =~ /\\/common\\/schemes\\//",
          "group": "ck3-tools@1"
        },
        {
          "command": "ck3-tools.generateLocalization",
          "when": "resourcePath =~ /\\/common\\//",
          "group": "ck3-tools@2"
        },
        {
          "command": "ck3-tools.goToLocalization",
          "when": "resourcePath =~ /\\/common\\//",
          "group": "ck3-tools@2"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "eslint": "^8.54.0",
    "tsx": "^4.21.0",
    "typescript": "^5.3.3",
    "vitest": "^4.0.18"
  },
  "dependencies": {
    "commander": "^14.0.3",
    "handlebars": "^4.7.8",
    "yaml": "^2.8.2"
  }
}
